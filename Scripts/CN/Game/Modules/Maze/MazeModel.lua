--Name : MazeModel.lua
--Author : generated by FairyGUI
--Date : 2020-4-11
--Desc : 


local MazeModel = class("MazeModel", BaseModel)

function MazeModel:ctor()
   self.mazeData = {}
   self.nextGrid = {}
   self.fightFlag = false
   self.initData = false
   self.layerMirrorData = false
   self.shopBuyFlag = false
end

function MazeModel:setShopBuyFlag(flag)
	self.shopBuyFlag = flag
end

function MazeModel:getShopBuyFlag()
	return self.shopBuyFlag
end

--登录初始化的数据
function MazeModel:setInitData( data )
	self.initData = data
end

function MazeModel:getInitData(  )
	return self.initData 
end

function MazeModel:setData( data )
	self.mazeData = data
end

function MazeModel:setFightFlag( flag )
	self.fightFlag = flag
end

function MazeModel:getFightFlag( ... )
	return self.fightFlag
end

function MazeModel:getData(  )
	return self.mazeData 
end

function MazeModel:setNextGrid( data )
	self.nextGrid = data
end

function MazeModel:getNextGrid(  )
	return self.nextGrid 
end

function MazeModel:checkExsitNext( id )
	return TableUtil.Exist(self.nextGrid,id)
end

function MazeModel:setLayerMirrorData( data )
	if data then
		self.layerMirrorData = data
	end
end

function MazeModel:getLayerMirrorData(  )
	return self.layerMirrorData 
end

function MazeModel:getFightValById( id,flag)
	local fightCount = 0
	if self.layerMirrorData  then
		-- printTable(1,self.layerMirrorData)
		for i,v in ipairs(self.layerMirrorData) do
			if v.id == id then
				if flag then
					for i2,v2 in ipairs(v.hero) do
						printTable(1,v2)
						if v2.mirror == 1 then --玩家
							fightCount = fightCount + v2.combat
						elseif v2.mirror == 2 then --怪
							fightCount = 1
							return fightCount
						end
					end
				else
					for i2,v2 in ipairs(v.hero) do
						fightCount = fightCount + v2.combat
					end
				end

				return fightCount
			end
		end
	end
	return fightCount
end

function MazeModel:getMonsterIDById( id )
	local monsterID = 0
	if self.layerMirrorData  then
		-- printTable(1,self.layerMirrorData)
		for i,v in ipairs(self.layerMirrorData) do
			if v.id == id then
				if v.hero and v.hero[1] then
					return v.hero[1].code
				end
			end
		end
	end
	return 0
end


function MazeModel:init()

end


return MazeModel
