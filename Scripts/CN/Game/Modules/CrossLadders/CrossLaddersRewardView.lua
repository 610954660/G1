--Date :2020-12-30
--Author : generated by FairyGUI
--Desc : 

local CrossLaddersRewardView,Super = class("CrossLaddersRewardView", Window)

function CrossLaddersRewardView:ctor()
	--LuaLog("CrossLaddersRewardView ctor")
	self._packName = "CrossLadders"
	self._compName = "CrossLaddersRewardView"
	self._rootDepth = LayerDepth.PopWindow
	
end

function CrossLaddersRewardView:_initEvent( )
	
end

function CrossLaddersRewardView:_initVM( )
	local viewNode = self.view
	---Do not modify following code--------
	--{autoFields}:CrossLadders.CrossLaddersRewardView
	self.frame = viewNode:getChildAutoType('frame')--GLabel
	self.list_page = viewNode:getChildAutoType('list_page')--GList
	self.list_reward = viewNode:getChildAutoType('list_reward')--GList
	self.txt_tip = viewNode:getChildAutoType('txt_tip')--GTextField
	--{autoFieldsEnd}:CrossLadders.CrossLaddersRewardView
	--Do not modify above code-------------
end

function CrossLaddersRewardView:_initListener( )
	self.list_page:setSelectedIndex(0)
	self.list_page:setItemRenderer(function(index, obj)

	end)

	local rewardCfg = DynamicConfigData.t_SkyLadderRank
	self.list_reward:setItemRenderer(function(index, obj)
		index = index + 1
		local data = rewardCfg[index]
		local minRank = data.minRank
		local maxRank = data.maxRank
		local rewardInfo = data.rewards
		local txt_rank 	= obj:getChildAutoType("txt_rank")
		local rankCtrl 	= obj:getController("rankCtrl")
		local list_reward = obj:getChildAutoType("list_reward")
		rankCtrl:setSelectedIndex(index < 4 and index or 4) 

		if index ~= #rewardCfg then
			if minRank ~= maxRank then
				txt_rank:setText(minRank .. "-" ..maxRank)
			else
				txt_rank:setText(minRank)
			end
		else
			txt_rank:setText(Desc.CrossLadders_str1)
		end

		list_reward:setItemRenderer(function(idx2,obj2)
			local index2 = idx2 +1
			local reward = rewardInfo[index2]
			local itemCell = BindManager.bindItemCell(obj2)
			itemCell:setData(reward.code,reward.amount,reward.type)
		end)
		list_reward:setData(rewardInfo)
	end)
	self.list_reward:setData(rewardCfg)

	-- self.txt_tip:setText()

end

function CrossLaddersRewardView:_initUI( )
	self:_initVM()
	self:_initListener()
end





return CrossLaddersRewardView