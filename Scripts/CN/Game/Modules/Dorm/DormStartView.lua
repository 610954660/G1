--Date :2021-01-06
--Author : generated by FairyGUI
--Desc : 

local DormStartView,Super = class("DormStartView", Window)

local GAME_VIEW = 
{
	[1] = "DormAnswerView", --对诗
	[2] = "DormAnswerView",	--答题
	[3] = "DormJigsawView", --拼图
}

function DormStartView:ctor()
	--LuaLog("DormStartView ctor")
	self._packName = "Dorm"
	self._compName = "DormStartView"
	--self._rootDepth = LayerDepth.Window
	self.heroId = false
end

function DormStartView:_initEvent( )
	self.btn_tab1:addClickListener(function ()
		local data = {}
		data.heroId = self.heroId
		data.type = self.gameType
		ViewManager.open(GAME_VIEW[self.gameType],{heroData = data})
		ViewManager.close("DormStartView")	
	end)
	self.btn_tab2:addClickListener(function ()
		ViewManager.close("DormStartView")
	end)
end

function DormStartView:_initVM( )
	local viewNode = self.view
	---Do not modify following code--------
	--{autoFields}:Dorm.DormStartView
	self.name = viewNode:getChildAutoType('$name')--GLabel
	self.text = viewNode:getChildAutoType('$text')--duihua
	self.btn_tab1 = viewNode:getChildAutoType('btn_tab1')--btn_tab
		self.btn_tab1.title = viewNode:getChildAutoType('btn_tab1/title')--GTextField
	self.btn_tab2 = viewNode:getChildAutoType('btn_tab2')--btn_tab
		self.btn_tab2.title = viewNode:getChildAutoType('btn_tab2/title')--GTextField
	self.frame = viewNode:getChildAutoType('frame')--GLabel
	self.lihuiDisplay = viewNode:getChildAutoType('lihuiDisplay')--GButton
	--{autoFieldsEnd}:Dorm.DormStartView
	--Do not modify above code-------------
end

function DormStartView:_initUI( )
	self:_initVM()
   	self:setBg("bg_heroDormitory1.jpg")
   	self.lihuiDisplay:setScale(0.8,0.8)
	self.heroId = self._args.heroId
	self.name:setText(DynamicConfigData.t_hero[self.heroId].heroName)
	self.lihuiDisplay = BindManager.bindLihuiDisplay(self.lihuiDisplay)
	self.lihuiDisplay:setData(self.heroId)
	self.btn_tab1.title:setText(Desc.HeroDormitory_str4)
	self.btn_tab2.title:setText(Desc.HeroDormitory_str5)
	self.gameType = self:getGameType()
	local info = DynamicConfigData.t_HeroInteractionType[self.gameType]
	self.text:setText(info.beginTall)
end

function DormStartView:getGameType()
	local num = TableUtil.GetTableLen(DynamicConfigData.t_HeroInteractionType)
	return math.random(1,num)
end

return DormStartView