--Date :2020-12-25
--Author : generated by FairyGUI
--Desc : 

local VipMemberView,Super = class("VipMemberView", Window)

function VipMemberView:ctor()
	--LuaLog("VipMemberView ctor")
	self._packName = "VipMember"
	self._compName = "VipMemberView"
	self._rootDepth = LayerDepth.PopWindow
	self.data = ModelManager.VipMemberModel.memberData
	self.descData = json.decode(self.data.description)
end

function VipMemberView:_initEvent( )
	
end

function VipMemberView:_initVM( )
	local viewNode = self.view
	---Do not modify following code--------
	--{autoFields}:VipMember.VipMemberView
	self.blackbg = viewNode:getChildAutoType('blackbg')--GLabel
	self.btn_reg = viewNode:getChildAutoType('btn_reg')--GButton
	self.list_desc = viewNode:getChildAutoType('list_desc')--GList
	self.pic_loader = viewNode:getChildAutoType('pic_loader')--GLoader
	--{autoFieldsEnd}:VipMember.VipMemberView
	--Do not modify above code-------------
end

function VipMemberView:_initListener( )
	
	self.btn_reg:addClickListener(function()
		if self.data.href_url then
			SDKUtil.openURL(self.data.href_url)
		end
	end)

	self.list_desc:setItemRenderer(function(index, obj)
		local txt_title = obj:getChildAutoType('txt_title')
		local txt_desc = obj:getChildAutoType('txt_desc')
		local data = self.descData[index + 1]
		
		txt_title:setText(data.title)
		txt_desc:setText(data.content)
	end)

end

function VipMemberView:_initUI( )
	self:_initVM()
	self:_initListener()
	
	self.pic_loader:setURL("UI/VipMember/"..self.data.photo)
	self.btn_reg:setVisible(self.data.href_url ~= nil and self.data.href_url ~= "")
	self.list_desc:setData(self.descData)
	
	RedManager.updateValue("M_VIP_MEMBER", false)
	FileCacheManager.setStringForKey("VipMember_oen"..PlayerModel.userid,"0")
end


return VipMemberView