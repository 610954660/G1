--Name : PveStarTempleRewardView.lua
--Author : generated by FairyGUI
--Date : 2020-8-3
--Desc : 

local PveStarTempleRewardView,Super = class("PveStarTempleRewardView", Window)

function PveStarTempleRewardView:ctor()
	--LuaLog("PveStarTempleRewardView ctor")
	self._packName = "PveStarTemple"
	self._compName = "PveStarTempleRewardView"
	self._rootDepth = LayerDepth.PopWindow
	self.rewardDatas = self._args.rewardDatas
end

function PveStarTempleRewardView:_initEvent( )
	
end

function PveStarTempleRewardView:_initVM( )
	local vmRoot = self
	local viewNode = self.view
	---Do not modify following code--------
	--{vmFields}:PveStarTemple.PveStarTempleRewardView
		--{vmFieldsEnd}:PveStarTemple.PveStarTempleRewardView
	--Do not modify above code-------------
end

function PveStarTempleRewardView:_initUI( )
	self:_initVM()
	self.itemList = self.view:getChildAutoType("itemList")
	self.itemList:setItemRenderer(function(index,obj)
		self:itemListRenderer(index,obj)
	end)
	self.itemList:setVirtual()
	self.itemList:setNumItems(#self.rewardDatas)
end

function PveStarTempleRewardView:_exit()
	self.rewardDatas = false
	if ViewManager.isShow("PveStarTempleMainView") then
		ViewManager.call("PveStarTempleMainView", "updateAreaList")
		ViewManager.call("PveStarTempleMainView", "updateSweep")
		ViewManager.call("PveStarTempleMainView", "updateLevel")
	end
end

function PveStarTempleRewardView:itemListRenderer(index,obj)
	local itemCell = BindManager.bindItemCell(obj:getChildAutoType("itemCell"))
	local reward  = self.rewardDatas[index + 1]
	local txtName = obj:getChildAutoType("txtName")
	local txtCount = obj:getChildAutoType("txtCount")

	itemCell:setData(reward.code,reward.amount,reward.type)
	itemCell:setIsShowName(false)
	itemCell:setAmount(0)

	txtName:setText(itemCell:getItemData():getName())
	txtCount:setText(reward.amount)
end

return PveStarTempleRewardView