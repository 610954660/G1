--Name : UpGetHelpView.lua
--Author : generated by FairyGUI
--Date : 2020-9-3
--Desc : 精英招募帮助

local UpGetHelpView,Super = class("UpGetHelpView", Window)
local  HeroConfiger = require "Game.ConfigReaders.HeroConfiger"
function UpGetHelpView:ctor()
	--LuaLog("UpGetHelpView ctor")
	self._packName = "UpGetCardActivity"
	self._compName = "UpGetHelpView"
	self._rootDepth = LayerDepth.PopWindow
	self.list2Data = {}
	
end

function UpGetHelpView:_initEvent( )
	
end

function UpGetHelpView:_initVM( )
	local vmRoot = self
	local viewNode = self.view
	---Do not modify following code--------
	--{vmFields}:UpGetCardActivity.UpGetHelpView
		vmRoot.txt = viewNode:getChildAutoType("$txt")--richtext
		vmRoot.list = viewNode:getChildAutoType("$list")--list
		vmRoot.list2 = viewNode:getChildAutoType("$list2")--list
	--{vmFieldsEnd}:UpGetCardActivity.UpGetHelpView
	--Do not modify above code-------------
end

function UpGetHelpView:_initUI( )
	self:_initVM()
	self.viewData = ActivityModel:getActityByType( GameDef.ActivityType.SpecialSummon )
	printTable(1,self.viewData)
    self.list:setItemRenderer(function (index,obj)
    	    local heroId = self.uphero[index+1]
    		local heroCell = BindManager.bindHeroCellShow(obj)
			local data = {}
			data.star = DynamicConfigData.t_hero[heroId].heroStar
			data.category = DynamicConfigData.t_hero[heroId].category
			data.code = heroId
			data.level = 1
			heroCell:setData(data)
	end)
	local lotteryId = self.viewData.showContent.lotteryIdList[1]
	local protectCountUp = DynamicConfigData.t_heroLottery[lotteryId].protectCountUp
	self.txt:setVar("count",tostring(protectCountUp))
	self.txt:flushVars()
    self.list2:setItemRenderer(function (index,obj)
    	 local txt1 = obj:getChildAutoType("txt1")
		 local txt4 = obj:getChildAutoType("txt4")
		 txt1:setText(self.list2Data[index+1].name)
		 txt4:setText(self.list2Data[index+1].theory.."%")
    end)
    if self.viewData.showContent.uphero then
    	self.uphero = self.viewData.showContent.uphero
		self.list:setData(self.viewData.showContent.uphero)
		for index, value in ipairs(self.uphero) do
			local config = HeroConfiger.getHeroInfoByID(self.uphero[index])
			local obj ={}
			obj.name = config.heroName
			obj.theory = self.viewData.showContent.weight[index] or 0
			table.insert(self.list2Data,obj)
		end
		local obj = {}
		obj.name = DescAuto[344] -- [344]="其他5星"
		obj.theory = "9.25"
		table.insert(self.list2Data,obj)
		local obj = {}
		obj.name = DescAuto[345] -- [345]="4星"
		obj.theory = "24.20"
		table.insert(self.list2Data,obj)
		local obj = {}
		obj.name = DescAuto[346] -- [346]="3星"
		obj.theory = "64.80"
		table.insert(self.list2Data,obj)
		self.list2:setData(self.list2Data)
    end

end




return UpGetHelpView
