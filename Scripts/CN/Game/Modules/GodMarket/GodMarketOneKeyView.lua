--Date :2021-01-18
--Author : generated by FairyGUI
--Desc : 

local GodMarketOneKeyView,Super = class("GodMarketOneKeyView", Window)

function GodMarketOneKeyView:ctor()
	--LuaLog("GodMarketOneKeyView ctor")
	self._packName = "GodMarket"
	self._compName = "GodMarketOneKeyView"
	self._rootDepth = LayerDepth.PopWindow
	
	self.curNum = 1
end

function GodMarketOneKeyView:_initEvent( )
	
end

function GodMarketOneKeyView:_initVM( )
	local viewNode = self.view
	---Do not modify following code--------
	--{autoFields}:GodMarket.GodMarketOneKeyView
	self.actionNum = viewNode:getChildAutoType('actionNum')--GTextField
	self.blackbg = viewNode:getChildAutoType('blackbg')--GLabel
	self.btn_add = viewNode:getChildAutoType('btn_add')--GButton
	self.btn_cancel = viewNode:getChildAutoType('btn_cancel')--GButton
	self.btn_max = viewNode:getChildAutoType('btn_max')--GButton
	self.btn_min = viewNode:getChildAutoType('btn_min')--GButton
	self.btn_sub = viewNode:getChildAutoType('btn_sub')--GButton
	self.btn_sure = viewNode:getChildAutoType('btn_sure')--GButton
	self.frame = viewNode:getChildAutoType('frame')--GLabel
	self.num = viewNode:getChildAutoType('num')--GTextField
	--{autoFieldsEnd}:GodMarket.GodMarketOneKeyView
	--Do not modify above code-------------
end

function GodMarketOneKeyView:_initListener( )
	
	self.btn_max:addClickListener(function()
		self.curNum = GodMarketModel.serverData.action
		self:updateText( )
	end)

	self.btn_min:addClickListener(function()
		self.curNum = 1
		self:updateText( )
	end)

	self.btn_add:addClickListener(function()
		if self.curNum < GodMarketModel.serverData.action then
			self.curNum = self.curNum + 1
			self:updateText( )
		end
	end)

	self.btn_sub:addClickListener(function()
		if self.curNum > 1 then
			self.curNum = self.curNum - 1
			self:updateText( )
		end
	end)

	self.btn_cancel:addClickListener(function()
		self:closeView()
	end)

	self.btn_sure:addClickListener(function()
		GodMarketModel:onekeyAction(self.curNum)
		self:closeView()
	end)

end

function GodMarketOneKeyView:_initUI( )
	self:_initVM()
	self:_initListener()

	self.num:setText(GodMarketModel.serverData.action)
	self:updateText( )
end


function GodMarketOneKeyView:updateText( )
	self.actionNum:setText(self.curNum)
end

return GodMarketOneKeyView