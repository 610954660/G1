--Date :2021-01-03
--Author : generated by FairyGUI
--Desc : 

local CrossTeamPVPRankRewardView,Super = class("CrossTeamPVPRankRewardView", Window)

function CrossTeamPVPRankRewardView:ctor()
	--LuaLog("CrossTeamPVPRankRewardView ctor")
	self._packName = "CrossTeamPVP"
	self._compName = "CrossTeamPVPRankRewardView"
	self._rootDepth = LayerDepth.PopWindow
	
end

function CrossTeamPVPRankRewardView:_initEvent( )
	
end

function CrossTeamPVPRankRewardView:_initVM( )
	local viewNode = self.view
	---Do not modify following code--------
	--{autoFields}:CrossTeamPVP.CrossTeamPVPRankRewardView
	self.blackbg = viewNode:getChildAutoType('blackbg')--GLabel
	self.frame = viewNode:getChildAutoType('frame')--GLabel
	self.list_reward = viewNode:getChildAutoType('list_reward')--GList
	self.txt_tips = viewNode:getChildAutoType('txt_tips')--GTextField
	--{autoFieldsEnd}:CrossTeamPVP.CrossTeamPVPRankRewardView
	--Do not modify above code-------------
end

function CrossTeamPVPRankRewardView:_initListener( )
	
	local rewardCfg = DynamicConfigData.t_WorldTeamAreanRankToReward
	self.list_reward:setItemRenderer(function(index, obj)
		index = index + 1
		local data = rewardCfg[index]
		local title = obj:getChildAutoType("title") 
		local list_reward = obj:getChildAutoType("list_reward")
		local reward = data.reward     
		local max  	= math.ceil((data.max/10000) * 100)

		title:setText(string.format(Desc.CrossTeamPVP_str9,max))
		list_reward:setItemRenderer(function(idx2,obj2) 
			local rd = reward[idx2+1]
			local itemCell = BindManager.bindItemCell(obj2)
			itemCell:setData(rd.code,rd.amount,rd.type)  
		end)
		list_reward:setData(reward)

	end)
	self.list_reward:setData(rewardCfg)

	self.txt_tips:setText(Desc.CrossTeamPVP_str10)
end

function CrossTeamPVPRankRewardView:_initUI( )
	self:_initVM()
	self:_initListener()

end




return CrossTeamPVPRankRewardView