--Name : SecretWeaponAddattrView.lua
--Author : generated by FairyGUI
--Date : 2020-7-28
--Desc : 

local SecretWeaponAddattrView,Super = class("SecretWeaponAddattrView", Window)

function SecretWeaponAddattrView:ctor()
	--LuaLog("SecretWeaponAddattrView ctor")
	self._packName = "SecretWeapons"
	self._compName = "SecretWeaponAddattrView"
	self._rootDepth = LayerDepth.AlertWindow
	
end

function SecretWeaponAddattrView:_initEvent( )
	
end

function SecretWeaponAddattrView:_initVM( )
	local vmRoot = self
	local viewNode = self.view
	---Do not modify following code--------
	--{vmFields}:SecretWeapons.SecretWeaponAddattrView
		vmRoot.list_attr = viewNode:getChildAutoType("$list_attr")--list
	--{vmFieldsEnd}:SecretWeapons.SecretWeaponAddattrView
	--Do not modify above code-------------
end

function SecretWeaponAddattrView:_initUI( )
	self:_initVM()
	local allArr={}
	local frame= self.view:getChildAutoType("frame")
	if self._args.type==1 then
		 frame:setTitle(DescAuto[239]) -- [239]="秘武属性"
		local oneAttr =SecretWeaponsModel:getOneEquipSkillLvAttr(self._args.id)
		for key, value in pairs(oneAttr) do
			allArr[#allArr+1]={value.type,value.value}
		end
	else
		frame:setTitle(DescAuto[240]) -- [240]="秘武总属性"
		local allAttr=SecretWeaponsModel:getAllattr()
		for key, value in pairs(allAttr) do
			allArr[#allArr+1]={key,value}
		end
	end
	self.list_attr:setItemRenderer(
		function(index, obj)
		local itemAttr=allArr[index+1]
		local attrName= GMethodUtil:getFightAttrName(itemAttr[1])
		local attrNum=	GMethodUtil:getFightAttrName(itemAttr[1],itemAttr[2])
		local txt_attrName= obj:getChildAutoType("txt_attrName")	
		txt_attrName:setText(attrName)
		local c1= obj:getController("c1")	
		c1:setSelectedIndex(1)
		local txt_cur= obj:getChildAutoType("txt_cur")	
		txt_cur:setText(attrNum)
		local iconLoader = obj:getChildAutoType("loader_attrIcon")
		iconLoader:setURL(PathConfiger.getFightAttrIcon(itemAttr[1]))
        end
    )
    self.list_attr:setNumItems(#allArr)
end




return SecretWeaponAddattrView
