--Name : SecretWeaponRenameView.lua
--Author : generated by FairyGUI
--Date : 2020-7-28
--Desc : 秘武改名

local SecretWeaponRenameView,Super = class("SecretWeaponRenameView", Window)

function SecretWeaponRenameView:ctor()
	--LuaLog("SecretWeaponRenameView ctor")
	self._packName = "SecretWeapons"
	self._compName = "SecretWeaponRenameView"
	self._rootDepth = LayerDepth.FaceWindow
	self.txt_input = false
end

function SecretWeaponRenameView:_initEvent( )
	
end

function SecretWeaponRenameView:_initVM( )
	local vmRoot = self
	local viewNode = self.view
	---Do not modify following code--------
	--{vmFields}:SecretWeapons.SecretWeaponRenameView
		vmRoot.txt_rename = viewNode:getChildAutoType("$txt_rename")--text
		vmRoot.btn_exit = viewNode:getChildAutoType("$btn_exit")--Button
		vmRoot.btn_sure = viewNode:getChildAutoType("$btn_sure")--Button
	--{vmFieldsEnd}:SecretWeapons.SecretWeaponRenameView
	--Do not modify above code-------------
end

function SecretWeaponRenameView:_initUI( )
	self:_initVM()
	self.txt_input = BindManager.bindTextInput(self.txt_rename)
	local oldname= self._args.name
	local id=self._args.id
	self.txt_input:setText(oldname)
end

--UI初始化
function SecretWeaponRenameView:_initEvent(...)
	self.btn_sure:addClickListener(
		function(...)
			local str=self.txt_input:getText();
			if StringUtil.utf8len(str) ==0 then
				-- RollTips.show(Desc.guild_checkStr25)
				return;
			end
			if StringUtil.utf8len(str) >7 then
				-- RollTips.show(Desc.guild_checkStr26)
				return 
			end
			 if StringUtil.containShieldCharacter(str) then
                    -- RollTips.show(Desc.guild_checkStr34)
                    return
				end
			-- local info=GuildModel.guildList
			-- if info.name==str then
			-- 	RollTips.show(Desc.guild_checkStr27)
			-- 	return
			-- end
			SecretWeaponsModel:godArmsChangeName(self._args.id,str)
			ViewManager.close("SecretWeaponRenameView")
        end
	)
	
	self.btn_exit:addClickListener(
		function(...)
			ViewManager.close("SecretWeaponRenameView")
        end
    )
end


return SecretWeaponRenameView