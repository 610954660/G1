--Date :2021-01-13
--Author : generated by FairyGUI
--Desc : 排名奖励

local CrossLaddersChampRankRewardView,Super = class("CrossLaddersChampRankRewardView", Window)

function CrossLaddersChampRankRewardView:ctor()
	--LuaLog("CrossLaddersChampRankRewardView ctor")
	self._packName = "CrossLaddersChamp"
	self._compName = "CrossLaddersChampRankRewardView"
	self._rootDepth = LayerDepth.PopWindow
	
end

function CrossLaddersChampRankRewardView:_initEvent( )
	
end

function CrossLaddersChampRankRewardView:_initVM( )
	local viewNode = self.view
	---Do not modify following code--------
	--{autoFields}:CrossLaddersChamp.CrossLaddersChampRankRewardView
	self.blackbg = viewNode:getChildAutoType('blackbg')--GLabel
	self.frame = viewNode:getChildAutoType('frame')--GLabel
	self.list_rankReward = viewNode:getChildAutoType('list_rankReward')--GList
	self.txt_rankTitle = viewNode:getChildAutoType('txt_rankTitle')--GTextField
	self.txt_rewardTitle = viewNode:getChildAutoType('txt_rewardTitle')--GTextField
	self.txt_tips = viewNode:getChildAutoType('txt_tips')--GTextField
	--{autoFieldsEnd}:CrossLaddersChamp.CrossLaddersChampRankRewardView
	--Do not modify above code-------------
end

function CrossLaddersChampRankRewardView:_initListener()

	local rewardInfo = DynamicConfigData.t_SkyLadChampionRank or {}
	self.list_rankReward:setItemRenderer(function(index, obj)
		index 	= index + 1
		local data 	= rewardInfo[index]
		local rankCtrl 	= obj:getController("rankCtrl")
		local list_reward 	= obj:getChildAutoType("list_reward")
		local txt_rank 	= obj:getChildAutoType("txt_rank")
		local rewardData 	= data.rewards

		rankCtrl:setSelectedIndex(index < 4 and index or 4)
		if index > 4 then
			if data.maxRank <= 64 then
				txt_rank:setText(string.format(Desc.CrossLaddersChamp_stage4,data.maxRank))
			else
				txt_rank:setText(string.format("%s-%s",data.minRank,data.maxRank))
			end
		end

		list_reward:setItemRenderer(function(idx2,obj2)
			local index2 	= idx2 + 1
			local reward 	= rewardData[index2]
			local itemCell 	= BindManager.bindItemCell(obj2)
			itemCell:setData(reward.code,reward.amount,reward.type)
		end)
		list_reward:setData(rewardData)
	end)
	self.list_rankReward:setData(rewardInfo)

	self.txt_tips:setText(Desc.CrossLaddersChamp_str10)
end

function CrossLaddersChampRankRewardView:_initUI( )
	self:_initVM()
	self:_initListener()

end




return CrossLaddersChampRankRewardView